/*
 * iosSlider - http://iosscripts.com/iosslider/
 * 
 * Touch Enabled, Responsive jQuery Horizontal Content Slider/Carousel/Image Gallery Plugin
 *
 * A jQuery plugin which allows you to integrate a customizable, cross-browser 
 * content slider into your web presence. Designed for use as a content slider, carousel, 
 * scrolling website banner, or image gallery.
 * 
 * Copyright (c) 2013 Marc Whitbread
 * 
 * Version: v1.2.16 (05/08/2013)
 * Minimum requirements: jQuery v1.4+
 *
 * Advanced requirements:
 * 1) jQuery bind() click event override on slide requires jQuery v1.6+
 *
 * Terms of use:
 *
 * 1) iosSlider is licensed under the Creative Commons â€“ Attribution-NonCommercial 3.0 License.
 * 2) You may use iosSlider free for personal or non-profit purposes, without restriction.
 *	  Attribution is not required but always appreciated. For commercial projects, you
 *	  must purchase a license. You may download and play with the script before deciding to
 *	  fully implement it in your project. Making sure you are satisfied, and knowing iosSlider
 *	  is the right script for your project is paramount.
 * 3) You are not permitted to make the resources found on iosscripts.com available for
 *    distribution elsewhere "as is" without prior consent. If you would like to feature
 *    iosSlider on your site, please do not link directly to the resource zip files. Please
 *    link to the appropriate page on iosscripts.com where users can find the download.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 */
 
(function(a){var ma=0,W=0,ba=0,M=0,Ba="ontouchstart"in window,Ca="onorientationchange"in window,ca=!1,Z=!1,X=!1,na=!1,fa="pointer",sa="pointer",ga=[],S=[],ta=[],da=[],I=[],$=[],y=[],j=[],q=[],ua=[],ea=[],e={showScrollbar:function(d,e){d.scrollbarHide&&a("."+e).css({opacity:d.scrollbarOpacity,filter:"alpha(opacity:"+100*d.scrollbarOpacity+")"})},hideScrollbar:function(a,f,b,w,c,g,j,q,F,v){if(a.scrollbar&&a.scrollbarHide)for(var y=b;y<b+25;y++)f[f.length]=e.hideScrollbarIntervalTimer(10*y,w[b],(b+24- y)/24,c,g,j,q,F,v,a)},hideScrollbarInterval:function(d,f,b,w,c,g,j,y,F){M=-1*d/q[y]*(c-g-j-w);e.setSliderOffset("."+b,M);a("."+b).css({opacity:F.scrollbarOpacity*f,filter:"alpha(opacity:"+100*F.scrollbarOpacity*f+")"})},slowScrollHorizontalInterval:function(d,f,b,w,c,g,T,N,F,v,K,x,r,s,E,n,k,z,h){if(h.infiniteSlider){if(b<=-1*q[n]){var B=a(d).width();if(b<=-1*ua[n]){var p=-1*K[0];a(f).each(function(b){e.setSliderOffset(a(f)[b],p+k);b<x.length&&(x[b]=-1*p);p+=E[b]});b+=-1*x[0];j[n]=-1*x[0]+k;q[n]=j[n]+ B-g;y[n]=0}else{var m=0,H=e.getSliderOffset(a(f[0]),"x");a(f).each(function(b){e.getSliderOffset(this,"x")<H&&(H=e.getSliderOffset(this,"x"),m=b)});r=j[n]+B;e.setSliderOffset(a(f)[m],r);j[n]=-1*x[1]+k;q[n]=j[n]+B-g;x.splice(0,1);x.splice(x.length,0,-1*r+k);y[n]++}}if(b>=-1*j[n]||0<=b){B=a(d).width();if(0<=b){p=-1*K[0];a(f).each(function(b){e.setSliderOffset(a(f)[b],p+k);b<x.length&&(x[b]=-1*p);p+=E[b]});b-=-1*x[0];j[n]=-1*x[0]+k;q[n]=j[n]+B-g;for(y[n]=s;0<-1*x[0]-B+k;){var u=0,t=e.getSliderOffset(a(f[0]), "x");a(f).each(function(b){e.getSliderOffset(this,"x")>t&&(t=e.getSliderOffset(this,"x"),u=b)});r=j[n]-E[u];e.setSliderOffset(a(f)[u],r);x.splice(0,0,-1*r+k);x.splice(x.length-1,1);j[n]=-1*x[0]+k;q[n]=j[n]+B-g;y[n]--;I[n]++}}0>b&&(u=0,t=e.getSliderOffset(a(f[0]),"x"),a(f).each(function(b){e.getSliderOffset(this,"x")>t&&(t=e.getSliderOffset(this,"x"),u=b)}),r=j[n]-E[u],e.setSliderOffset(a(f)[u],r),x.splice(0,0,-1*r+k),x.splice(x.length-1,1),j[n]=-1*x[0]+k,q[n]=j[n]+B-g,y[n]--)}}K=!1;g=e.calcActiveOffset(h, b,x,g,y[n],s,v,n);r=(g+y[n]+s)%s;h.infiniteSlider?r!=$[n]&&(K=!0):g!=I[n]&&(K=!0);if(K&&(s=new e.args("change",h,d,a(d).children(":eq("+r+")"),r,z),a(d).parent().data("args",s),""!=h.onSlideChange))h.onSlideChange(s);I[n]=g;$[n]=r;b=Math.floor(b);e.setSliderOffset(d,b);h.scrollbar&&(M=Math.floor((-1*b-j[n]+k)/(q[n]-j[n]+k)*(T-N-c)),d=c-F,b>=-1*j[n]+k?(d=c-F- -1*M,e.setSliderOffset(a("."+w),0)):(b<=-1*q[n]+1&&(d=T-N-F-M),e.setSliderOffset(a("."+w),M)),a("."+w).css({width:d+"px"}))},slowScrollHorizontal:function(d, f,b,w,c,g,T,N,F,v,K,x,r,s,E,n,k,z,h,B,p){var m=e.getSliderOffset(d,"x");g=[];var H=0,u=25/1024*N;frictionCoefficient=p.frictionCoefficient;elasticFrictionCoefficient=p.elasticFrictionCoefficient;snapFrictionCoefficient=p.snapFrictionCoefficient;c>p.snapVelocityThreshold&&p.snapToChildren&&!h?H=1:c<-1*p.snapVelocityThreshold&&(p.snapToChildren&&!h)&&(H=-1);c<-1*u?c=-1*u:c>u&&(c=u);a(d)[0]!==a(z)[0]&&(H*=-1,c*=-2);z=y[E];if(p.infiniteSlider)var t=j[E],l=q[E];h=[];for(var u=[],C=0;C<r.length;C++)h[C]= r[C],C<f.length&&(u[C]=e.getSliderOffset(a(f[C]),"x"));for(;1<c||-1>c;){c*=frictionCoefficient;m+=c;if((m>-1*j[E]||m<-1*q[E])&&!p.infiniteSlider)c*=elasticFrictionCoefficient,m+=c;if(p.infiniteSlider){if(m<=-1*l){for(var l=a(d).width(),M=0,P=u[0],C=0;C<u.length;C++)u[C]<P&&(P=u[C],M=C);C=t+l;u[M]=C;t=-1*h[1]+B;l=t+l-N;h.splice(0,1);h.splice(h.length,0,-1*C+B);z++}if(m>=-1*t){l=a(d).width();M=0;P=u[0];for(C=0;C<u.length;C++)u[C]>P&&(P=u[C],M=C);C=t-s[M];u[M]=C;h.splice(0,0,-1*C+B);h.splice(h.length- 1,1);t=-1*h[0]+B;l=t+l-N;z--}}g[g.length]=m}u=!1;c=e.calcActiveOffset(p,m,h,N,z,k,I[E],E);t=(c+z+k)%k;p.snapToChildren&&(p.infiniteSlider?t!=$[E]&&(u=!0):c!=I[E]&&(u=!0),0>H&&!u?(c++,c>=r.length&&!p.infinteSlider&&(c=r.length-1)):0<H&&!u&&(c--,0>c&&!p.infinteSlider&&(c=0)));if(p.snapToChildren||(m>-1*j[E]||m<-1*q[E])&&!p.infiniteSlider){(m>-1*j[E]||m<-1*q[E])&&!p.infiniteSlider?g.splice(0,g.length):(g.splice(0.1*g.length,g.length),m=g[g.length-1]);for(;m<h[c]-0.5||m>h[c]+0.5;)m=(m-h[c])*snapFrictionCoefficient+ h[c],g[g.length]=m;g[g.length]=h[c]}H=1;0!=g.length%2&&(H=0);for(m=0;m<b.length;m++)clearTimeout(b[m]);z=(c+z+k)%k;t=0;for(m=H;m<g.length;m+=2)if(m==H||1<Math.abs(g[m]-t)||m>=g.length-2)t=g[m],b[b.length]=e.slowScrollHorizontalIntervalTimer(10*m,d,f,g[m],w,T,N,F,v,K,c,x,r,n,k,s,E,B,z,p);t=(c+y[E]+k)%k;""!=p.onSlideComplete&&(b[b.length]=e.onSlideCompleteTimer(10*(m+1),p,d,a(d).children(":eq("+t+")"),t,E));da[E]=b;e.hideScrollbar(p,b,m,g,w,T,N,v,K,E)},onSlideComplete:function(d,f,b,w){b=new e.args("complete", d,a(f),b,w,w);a(f).parent().data("args",b);if(""!=d.onSlideComplete)d.onSlideComplete(b)},getSliderOffset:function(d,e){var b=0;e="x"==e?4:5;if(ca&&!Z&&!X){for(var b=["-webkit-transform","-moz-transform","transform"],w=0;w<b.length;w++)if(void 0!=a(d).css(b[w])&&0<a(d).css(b[w]).length){var c=a(d).css(b[w]).split(",");break}b=parseInt(c[e],10)}else b=parseInt(a(d).css("left"),10);return b},setSliderOffset:function(d,e){ca&&!Z&&!X?a(d).css({webkitTransform:"matrix(1,0,0,1,"+e+",0)",MozTransform:"matrix(1,0,0,1,"+ e+",0)",transform:"matrix(1,0,0,1,"+e+",0)"}):a(d).css({left:e+"px"})},setBrowserInfo:function(){null!=navigator.userAgent.match("WebKit")?(fa="-webkit-grab",sa="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(fa="move",sa="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")?na=Z=!0:null!=navigator.userAgent.match("MSIE 8")?na=X=!0:null!=navigator.userAgent.match("MSIE 9")&&(na=!0)},has3DTransform:function(){var d=!1,e=a("<div />").css({webkitTransform:"matrix(1,1,1,1,1,1)",MozTransform:"matrix(1,1,1,1,1,1)", transform:"matrix(1,1,1,1,1,1)"});""==e.attr("style")?d=!1:void 0!=e.attr("style")&&(d=!0);return d},getSlideNumber:function(a,e,b){return(a-y[e]+b)%b},calcActiveOffset:function(a,e,b,w,c,g){c=!1;a=[];var j;e>b[0]&&(j=0);e<b[b.length-1]&&(j=g-1);for(g=0;g<b.length;g++)b[g]<=e&&b[g]>e-w&&(!c&&b[g]!=e&&(a[a.length]=b[g-1]),a[a.length]=b[g],c=!0);0==a.length&&(a[0]=b[b.length-1]);for(g=c=0;g<a.length;g++){var q=Math.abs(e-a[g]);q<w&&(c=a[g],w=q)}for(g=0;g<b.length;g++)c==b[g]&&(j=g);return j},changeSlide:function(d, f,b,w,c,g,j,q,F,v,K,x,r,s,E,n,k,z){e.autoSlidePause(s);for(var h=0;h<w.length;h++)clearTimeout(w[h]);var B=Math.ceil(z.autoSlideTransTimer/10)+1,p=e.getSliderOffset(f,"x"),m=x[d],m=m-p,H=d-(I[s]+y[s]+n)%n;if(z.infiniteSlider){d=(d-y[s]+2*n)%n;h=!1;0==d&&2==n&&(d=n,x[d]=x[d-1]-a(b).eq(0).outerWidth(!0),h=!0);var m=x[d],m=m-p,u=[x[d]-a(f).width(),x[d]+a(f).width()];h&&x.splice(x.length-1,1);for(h=0;h<u.length;h++)Math.abs(u[h]-p)<Math.abs(m)&&(m=u[h]-p);0>m&&-1==H?m+=a(f).width():0<m&&1==H&&(m-=a(f).width())}H= [];e.showScrollbar(z,c);for(h=0;h<=B;h++)u=h,u/=B,u--,u=p+m*(Math.pow(u,5)+1),H[H.length]=u;for(h=p=0;h<H.length;h++){if(0==h||1<Math.abs(H[h]-p)||h>=H.length-2)p=H[h],w[h]=e.slowScrollHorizontalIntervalTimer(10*(h+1),f,b,H[h],c,g,j,q,F,v,d,K,x,E,n,r,s,k,d,z);0==h&&""!=z.onSlideStart&&(B=(I[s]+y[s]+n)%n,z.onSlideStart(new e.args("start",z,f,a(f).children(":eq("+B+")"),B,d)))}p=!1;B=(d+y[s]+n)%n;z.infiniteSlider?B!=$[s]&&(p=!0):d!=I[s]&&(p=!0);p&&""!=z.onSlideComplete&&(w[w.length]=e.onSlideCompleteTimer(10* (h+1),z,f,a(f).children(":eq("+B+")"),B,s));da[s]=w;e.hideScrollbar(z,w,h,H,c,g,j,F,v,s);e.autoSlide(f,b,w,c,g,j,q,F,v,K,x,r,s,E,n,k,z)},autoSlide:function(a,f,b,w,c,g,j,q,F,v,K,x,r,s,E,n,k){if(!S[r].autoSlide)return!1;e.autoSlidePause(r);ga[r]=setTimeout(function(){!k.infiniteSlider&&I[r]>K.length-1&&(I[r]-=E);e.changeSlide((I[r]+y[r]+E)%E+1,a,f,b,w,c,g,j,q,F,v,K,x,r,s,E,n,k);e.autoSlide(a,f,b,w,c,g,j,q,F,v,K,x,r,s,E,n,k)},k.autoSlideTimer+k.autoSlideTransTimer)},autoSlidePause:function(a){clearTimeout(ga[a])}, isUnselectable:function(e,f){return""!=f.unselectableSelector&&1==a(e).closest(f.unselectableSelector).size()?!0:!1},slowScrollHorizontalIntervalTimer:function(a,f,b,w,c,g,j,q,y,v,I,x,r,s,E,n,k,z,h,B){return setTimeout(function(){e.slowScrollHorizontalInterval(f,b,w,c,g,j,q,y,v,I,x,r,s,E,n,k,z,h,B)},a)},onSlideCompleteTimer:function(a,f,b,w,c,g){return setTimeout(function(){e.onSlideComplete(f,b,w,c,g)},a)},hideScrollbarIntervalTimer:function(a,f,b,w,c,g,j,q,y,v){return setTimeout(function(){e.hideScrollbarInterval(f, b,w,c,g,j,q,y,v)},a)},args:function(d,f,b,j,c){this.prevSlideNumber=void 0==a(b).parent().data("args")?void 0:a(b).parent().data("args").prevSlideNumber;this.prevSlideObject=void 0==a(b).parent().data("args")?void 0:a(b).parent().data("args").prevSlideObject;this.targetSlideObject=this.targetSlideNumber=void 0;this.slideChanged=!1;"load"!=d&&"start"!=d&&("change"==d?(this.slideChanged=!0,this.prevSlideNumber=void 0==a(b).parent().data("args")?f.startAtSlide:a(b).parent().data("args").currentSlideNumber, this.prevSlideObject=a(b).children(":eq("+this.prevSlideNumber+")")):"complete"==d&&(this.slideChanged=a(b).parent().data("args").slideChanged));this.settings=f;this.data=a(b).parent().data("iosslider");this.sliderObject=b;this.sliderContainerObject=a(b).parent();this.currentSlideObject=j;this.currentSlideNumber=c+1;this.currentSliderOffset=-1*e.getSliderOffset(b,"x")},preventDrag:function(a){a.preventDefault()},preventClick:function(a){a.stopImmediatePropagation();return!1},enableClick:function(){return!0}}; e.setBrowserInfo();var R={init:function(d,f){ca=e.has3DTransform();var b=a.extend(!0,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,snapSlideCenter:!1,startAtSlide:1,scrollbar:!1,scrollbarDrag:!1,scrollbarHide:!0,scrollbarLocation:"top",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000", scrollbarElasticPullResistance:0.9,desktopClickDrag:!1,keyboardControls:!1,tabToAdvance:!1,responsiveSlideContainer:!0,responsiveSlides:!0,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1,autoSlideTimer:5E3,autoSlideTransTimer:750,infiniteSlider:!1,snapVelocityThreshold:5,slideStartVelocityThreshold:0,horizontalSlideLockThreshold:5,verticalSlideLockThreshold:3,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"", onSliderLoaded:"",onSliderUpdate:"",onSliderResize:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},d);void 0==f&&(f=this);return a(f).each(function(){function d(){e.autoSlidePause(c);va=a(D).find("a");za=a(D).find("[onclick]");oa=a(D).find("*");a(z).css("width","");a(z).css("height","");a(D).css("width","");A=a(D).children().not("script").get();ha=[];L=[];a(A).css("width","");q[c]=0;l=[];E=a(z).parent().width();h=a(z).outerWidth(!0);b.responsiveSlideContainer&&(h=a(z).outerWidth(!0)>E?E:a(z).outerWidth(!0)); a(z).css({position:b.stageCSS.position,top:b.stageCSS.top,left:b.stageCSS.left,overflow:b.stageCSS.overflow,zIndex:b.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",msTouchAction:"pan-y",width:h});a(b.unselectableSelector).css({cursor:"default"});for(var G=0;G<A.length;G++){ha[G]=a(A[G]).width();L[G]=a(A[G]).outerWidth(!0);var w=L[G];b.responsiveSlides&&(w=L[G]>h?h+-1*(L[G]-ha[G]):ha[G],a(A[G]).css({width:w}));a(A[G]).css({webkitBackfaceVisibility:"hidden",position:"absolute", top:0});l[G]=-1*q[c];q[c]=q[c]+w+(L[G]-ha[G])}b.snapSlideCenter&&(k=0.5*(h-L[0]),b.responsiveSlides&&L[0]>h&&(k=0));ua[c]=2*q[c];for(G=0;G<A.length;G++)e.setSliderOffset(a(A[G]),-1*l[G]+q[c]+k),l[G]-=q[c];if(!b.infiniteSlider&&!b.snapSlideCenter){for(G=0;G<l.length&&!(l[G]<=-1*(2*q[c]-h));G++)ga=G;l.splice(ga+1,l.length);l[l.length]=-1*(2*q[c]-h)}for(G=0;G<l.length;G++)C[G]=l[G];u&&(b.startAtSlide=S[c].startAtSlide>l.length?l.length:S[c].startAtSlide,b.infiniteSlider?(b.startAtSlide=(S[c].startAtSlide- 1+J)%J,I[c]=S[c].startAtSlide):(b.startAtSlide=0>S[c].startAtSlide-1?l.length-1:S[c].startAtSlide,I[c]=S[c].startAtSlide-1),$[c]=I[c]);j[c]=q[c]+k;a(D).css({position:"relative",cursor:fa,webkitPerspective:"0",webkitBackfaceVisibility:"hidden",width:q[c]+"px"});V=q[c];q[c]=2*q[c]-h+2*k;(Y=V<h?!0:!1)&&a(D).css({cursor:"default"});n=a(z).parent().outerHeight(!0);B=a(z).height();b.responsiveSlideContainer&&(B=B>n?n:B);a(z).css({height:B});e.setSliderOffset(D,l[I[c]]);if(b.infiniteSlider&&!Y){G=e.getSliderOffset(a(D), "x");for(w=-1*((y[c]+J)%J);0>w;){var t=0,ia=e.getSliderOffset(a(A[0]),"x");a(A).each(function(a){e.getSliderOffset(this,"x")<ia&&(ia=e.getSliderOffset(this,"x"),t=a)});var H=j[c]+V;e.setSliderOffset(a(A)[t],H);j[c]=-1*l[1]+k;q[c]=j[c]+V-h;l.splice(0,1);l.splice(l.length,0,-1*H+k);w++}for(;0<-1*l[0]-V+k&&b.snapSlideCenter&&u;){var M=0,N=e.getSliderOffset(a(A[0]),"x");a(A).each(function(a){e.getSliderOffset(this,"x")>N&&(N=e.getSliderOffset(this,"x"),M=a)});H=j[c]-L[M];e.setSliderOffset(a(A)[M],H); l.splice(0,0,-1*H+k);l.splice(l.length-1,1);j[c]=-1*l[0]+k;q[c]=j[c]+V-h;y[c]--;I[c]++}for(;G<=-1*q[c];)t=0,ia=e.getSliderOffset(a(A[0]),"x"),a(A).each(function(a){e.getSliderOffset(this,"x")<ia&&(ia=e.getSliderOffset(this,"x"),t=a)}),H=j[c]+V,e.setSliderOffset(a(A)[t],H),j[c]=-1*l[1]+k,q[c]=j[c]+V-h,l.splice(0,1),l.splice(l.length,0,-1*H+k),y[c]++,I[c]--}e.setSliderOffset(D,l[I[c]]);b.desktopClickDrag||a(D).css({cursor:"default"});b.scrollbar&&(a("."+F).css({margin:b.scrollbarMargin,overflow:"hidden", display:"none"}),a("."+F+" ."+v).css({border:b.scrollbarBorder}),p=parseInt(a("."+F).css("marginLeft"))+parseInt(a("."+F).css("marginRight")),m=parseInt(a("."+F+" ."+v).css("borderLeftWidth"),10)+parseInt(a("."+F+" ."+v).css("borderRightWidth"),10),r=""!=b.scrollbarContainer?a(b.scrollbarContainer).width():h,s=(r-p)/J,b.scrollbarHide||(R=b.scrollbarOpacity),a("."+F).css({position:"absolute",left:0,width:r-p+"px",margin:b.scrollbarMargin}),"top"==b.scrollbarLocation?a("."+F).css("top","0"):a("."+F).css("bottom", "0"),a("."+F+" ."+v).css({borderRadius:b.scrollbarBorderRadius,background:b.scrollbarBackground,height:b.scrollbarHeight,width:s-m+"px",minWidth:b.scrollbarHeight,border:b.scrollbarBorder,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:R,filter:"alpha(opacity:"+100*R+")",boxShadow:b.scrollbarShadow}),e.setSliderOffset(a("."+F+" ."+v),Math.floor((-1*l[I[c]]-j[c]+k)/(q[c]-j[c]+k)*(r-p-s))),a("."+F).css({display:"block"}),K=a("."+F+" ."+v),x=a("."+F));b.scrollbarDrag&& !Y&&a("."+F+" ."+v).css({cursor:fa});b.infiniteSlider&&(Q=(q[c]+h)/3);""!=b.navSlideSelector&&a(b.navSlideSelector).each(function(d){a(this).css({cursor:"pointer"});a(this).unbind(O).bind(O,function(G){"touchstart"==G.type?a(this).unbind("click.iosSliderEvent"):a(this).unbind("touchstart.iosSliderEvent");O=G.type+".iosSliderEvent";e.changeSlide(d,D,A,f,v,s,h,r,p,m,C,l,L,c,Q,J,k,b)})});""!=b.navPrevSelector&&(a(b.navPrevSelector).css({cursor:"pointer"}),a(b.navPrevSelector).unbind(O).bind(O,function(d){"touchstart"== d.type?a(this).unbind("click.iosSliderEvent"):a(this).unbind("touchstart.iosSliderEvent");O=d.type+".iosSliderEvent";d=(I[c]+y[c]+J)%J;(0<d||b.infiniteSlider)&&e.changeSlide(d-1,D,A,f,v,s,h,r,p,m,C,l,L,c,Q,J,k,b)}));""!=b.navNextSelector&&(a(b.navNextSelector).css({cursor:"pointer"}),a(b.navNextSelector).unbind(O).bind(O,function(d){"touchstart"==d.type?a(this).unbind("click.iosSliderEvent"):a(this).unbind("touchstart.iosSliderEvent");O=d.type+".iosSliderEvent";d=(I[c]+y[c]+J)%J;(d<l.length-1||b.infiniteSlider)&& e.changeSlide(d+1,D,A,f,v,s,h,r,p,m,C,l,L,c,Q,J,k,b)}));b.autoSlide&&!Y&&""!=b.autoSlideToggleSelector&&(a(b.autoSlideToggleSelector).css({cursor:"pointer"}),a(b.autoSlideToggleSelector).unbind(O).bind(O,function(d){"touchstart"==d.type?a(this).unbind("click.iosSliderEvent"):a(this).unbind("touchstart.iosSliderEvent");O=d.type+".iosSliderEvent";wa?(e.autoSlide(D,A,f,v,s,h,r,p,m,C,l,L,c,Q,J,k,b),wa=!1,a(b.autoSlideToggleSelector).removeClass("on")):(e.autoSlidePause(c),wa=!0,a(b.autoSlideToggleSelector).addClass("on"))})); e.autoSlide(D,A,f,v,s,h,r,p,m,C,l,L,c,Q,J,k,b);a(z).bind("mouseleave.iosSliderEvent",function(){e.autoSlide(D,A,f,v,s,h,r,p,m,C,l,L,c,Q,J,k,b)});a(z).bind("touchend.iosSliderEvent",function(){e.autoSlide(D,A,f,v,s,h,r,p,m,C,l,L,c,Q,J,k,b)});a(z).bind("mouseenter.iosSliderEvent",function(){e.autoSlidePause(c)});a(z).data("iosslider",{obj:Aa,settings:b,scrollerNode:D,slideNodes:A,numberOfSlides:J,centeredSlideOffset:k,sliderNumber:c,originalOffsets:C,childrenOffsets:l,sliderMax:q[c],scrollbarClass:v, scrollbarWidth:s,scrollbarStageWidth:r,stageWidth:h,scrollMargin:p,scrollBorder:m,infiniteSliderOffset:y[c],infiniteSliderWidth:Q,slideNodeOuterWidths:L});u=!1;return!0}ma++;var c=ma,f=[];S[c]=b;j[c]=0;q[c]=0;var T=[0,0],N=[0,0],F="scrollbarBlock"+ma,v="scrollbar"+ma,K,x,r,s,E,n,k=0,z=a(this),h,B,p,m,H,u=!0,t=-1,l,C=[],R=0,P=0,ca=0,D=a(this).children(":first-child"),A,ha,L,J=a(D).children().not("script").size(),U=!1,ga=0,xa=!1,pa=void 0,Q;y[c]=0;var Y=!1,wa=!1;ta[c]=!1;var qa,ra=!1,ja=!1,O="touchstart.iosSliderEvent click.iosSliderEvent", V,va,za,oa;ea[c]=!1;da[c]=[];b.scrollbarDrag&&(b.scrollbar=!0,b.scrollbarHide=!1);var Aa=a(this);if(void 0!=Aa.data("iosslider"))return!0;a(this).find("img").bind("dragstart.iosSliderEvent",function(a){a.preventDefault()});b.infiniteSlider&&(b.scrollbar=!1);b.infiniteSlider&&1==J&&(b.infiniteSlider=!1);b.scrollbar&&(""!=b.scrollbarContainer?a(b.scrollbarContainer).append("<div class = '"+F+"'><div class = '"+v+"'></div></div>"):a(D).parent().append("<div class = '"+F+"'><div class = '"+v+"'></div></div>")); if(!d())return!0;a(this).find("a").bind("mousedown",e.preventDrag);a(this).find("[onclick]").bind("click",e.preventDrag).each(function(){a(this).data("onclick",this.onclick)});t=e.calcActiveOffset(b,e.getSliderOffset(a(D),"x"),l,h,y[c],J,void 0,c);t=(t+y[c]+J)%J;t=new e.args("load",b,D,a(D).children(":eq("+t+")"),t,t);a(z).data("args",t);if(""!=b.onSliderLoaded)b.onSliderLoaded(t);if(S[c].responsiveSlides||S[c].responsiveSlideContainer)t=Ca?"orientationchange":"resize",a(window).bind(t+".iosSliderEvent-"+ c,function(){if(!d())return!0;var c=a(z).data("args");if(""!=b.onSliderResize)b.onSliderResize(c)});(b.keyboardControls||b.tabToAdvance)&&!Y&&a(document).bind("keydown.iosSliderEvent",function(a){!Z&&!X&&(a=a.originalEvent);if(37==a.keyCode&&b.keyboardControls)a.preventDefault(),a=(I[c]+y[c]+J)%J,(0<a||b.infiniteSlider)&&e.changeSlide(a-1,D,A,f,v,s,h,r,p,m,C,l,L,c,Q,J,k,b);else if(39==a.keyCode&&b.keyboardControls||9==a.keyCode&&b.tabToAdvance)a.preventDefault(),a=(I[c]+y[c]+J)%J,(a<l.length-1||b.infiniteSlider)&& e.changeSlide(a+1,D,A,f,v,s,h,r,p,m,C,l,L,c,Q,J,k,b)});if(Ba||b.desktopClickDrag){var aa=!1,ka=a(D),la=a(D),ya=!1;b.scrollbarDrag&&(ka=ka.add(K),la=la.add(x));a(ka).bind("mousedown.iosSliderEvent touchstart.iosSliderEvent",function(d){if(aa)return!0;aa=!0;"touchstart"==d.type?a(la).unbind("mousedown.iosSliderEvent"):a(la).unbind("touchstart.iosSliderEvent");if(ea[c]||Y||(ya=e.isUnselectable(d.target,b)))return U=aa=!1,!0;qa=a(this)[0]===a(K)[0]?K:D;!Z&&!X&&(d=d.originalEvent);e.autoSlidePause(c); oa.unbind(".disableClick");if("touchstart"==d.type)eventX=d.touches[0].pageX,eventY=d.touches[0].pageY;else{if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else if(document.selection)if(X)try{document.selection.empty()}catch(h){}else document.selection.empty();eventX=d.pageX;eventY=d.pageY;xa=!0;pa=D;a(this).css({cursor:sa})}T=[0,0];N=[0,0];W=0;U=!1;for(d=0;d<f.length;d++)clearTimeout(f[d]); d=e.getSliderOffset(D,"x");d>-1*j[c]+k+V?(d=-1*j[c]+k+V,e.setSliderOffset(a("."+v),d),a("."+v).css({width:s-m+"px"})):d<-1*q[c]&&(e.setSliderOffset(a("."+v),r-p-s),a("."+v).css({width:s-m+"px"}));d=a(this)[0]===a(K)[0]?j[c]:0;P=-1*(e.getSliderOffset(this,"x")-eventX-d);e.getSliderOffset(this,"y");T[1]=eventX;N[1]=eventY;ja=!1});a(la).bind("touchmove.iosSliderEvent mousemove.iosSliderEvent",function(d){!Z&&!X&&(d=d.originalEvent);if(ea[c]||Y||ya)return!0;var f=0;if("touchmove"==d.type)eventX=d.touches[0].pageX, eventY=d.touches[0].pageY;else{if(window.getSelection)window.getSelection().empty||window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else if(document.selection)if(X)try{document.selection.empty()}catch(w){}else document.selection.empty();eventX=d.pageX;eventY=d.pageY;if(!xa||!na&&("undefined"!=typeof d.webkitMovementX||"undefined"!=typeof d.webkitMovementY)&&0===d.webkitMovementY&&0===d.webkitMovementX)return!0}T[0]=T[1];T[1]=eventX;W=(T[1]-T[0])/2;N[0]=N[1];N[1]=eventY; ba=(N[1]-N[0])/2;if(!U){var g=(I[c]+y[c]+J)%J,g=new e.args("start",b,D,a(D).children(":eq("+g+")"),g,g);a(z).data("args",g);if(""!=b.onSlideStart)b.onSlideStart(g)}if((ba>b.verticalSlideLockThreshold||ba<-1*b.verticalSlideLockThreshold)&&"touchmove"==d.type&&!U)ra=!0;(W>b.horizontalSlideLockThreshold||W<-1*b.horizontalSlideLockThreshold)&&"touchmove"==d.type&&d.preventDefault();if(W>b.slideStartVelocityThreshold||W<-1*b.slideStartVelocityThreshold)U=!0;if(U&&!ra){var g=e.getSliderOffset(D,"x"),n= a(this)[0]===a(x)[0]?j[c]:k,u=a(this)[0]===a(x)[0]?(j[c]-q[c]-k)/(r-p-s):1,t=a(this)[0]===a(x)[0]?b.scrollbarElasticPullResistance:b.elasticPullResistance,E=b.snapSlideCenter&&a(this)[0]===a(x)[0]?0:k,F=b.snapSlideCenter&&a(this)[0]===a(x)[0]?k:0;"touchmove"==d.type&&(ca!=d.touches.length&&(P=-1*g+eventX),ca=d.touches.length);if(b.infiniteSlider){if(g<=-1*q[c]){var B=a(D).width();if(g<=-1*ua[c]){var K=-1*C[0];a(A).each(function(b){e.setSliderOffset(a(A)[b],K+k);b<l.length&&(l[b]=-1*K);K+=L[b]});P-= -1*l[0];j[c]=-1*l[0]+k;q[c]=j[c]+B-h;y[c]=0}else{var Q=0,S=e.getSliderOffset(a(A[0]),"x");a(A).each(function(a){e.getSliderOffset(this,"x")<S&&(S=e.getSliderOffset(this,"x"),Q=a)});t=j[c]+B;e.setSliderOffset(a(A)[Q],t);j[c]=-1*l[1]+k;q[c]=j[c]+B-h;l.splice(0,1);l.splice(l.length,0,-1*t+k);y[c]++}}if(g>=-1*j[c]||0<=g)if(B=a(D).width(),0<=g){K=-1*C[0];a(A).each(function(b){e.setSliderOffset(a(A)[b],K+k);b<l.length&&(l[b]=-1*K);K+=L[b]});P+=-1*l[0];j[c]=-1*l[0]+k;q[c]=j[c]+B-h;for(y[c]=J;0<-1*l[0]-B+ k;){var O=0,R=e.getSliderOffset(a(A[0]),"x");a(A).each(function(a){e.getSliderOffset(this,"x")>R&&(R=e.getSliderOffset(this,"x"),O=a)});t=j[c]-L[O];e.setSliderOffset(a(A)[O],t);l.splice(0,0,-1*t+k);l.splice(l.length-1,1);j[c]=-1*l[0]+k;q[c]=j[c]+B-h;y[c]--;I[c]++}}else O=0,R=e.getSliderOffset(a(A[0]),"x"),a(A).each(function(a){e.getSliderOffset(this,"x")>R&&(R=e.getSliderOffset(this,"x"),O=a)}),t=j[c]-L[O],e.setSliderOffset(a(A)[O],t),l.splice(0,0,-1*t+k),l.splice(l.length-1,1),j[c]=-1*l[0]+k,q[c]= j[c]+B-h,y[c]--}else B=a(D).width(),g>-1*j[c]+k&&(f=-1*(j[c]+-1*(P-n-eventX+E)*u-n)*t/u),g<-1*q[c]&&(f=-1*(q[c]+F+-1*(P-n-eventX)*u-n)*t/u);e.setSliderOffset(D,-1*(P-n-eventX-f)*u-n+F);b.scrollbar&&(e.showScrollbar(b,v),M=Math.floor((P-eventX-f-j[c]+E)/(q[c]-j[c]+k)*(r-p-s)*u),g=s,0>=M?(g=s-m- -1*M,e.setSliderOffset(a("."+v),0),a("."+v).css({width:g+"px"})):M>=r-p-m-s?(g=r-p-m-M,e.setSliderOffset(a("."+v),M),a("."+v).css({width:g+"px"})):e.setSliderOffset(a("."+v),M));"touchmove"==d.type&&(H=d.touches[0].pageX); d=!1;f=e.calcActiveOffset(b,-1*(P-eventX-f),l,h,y[c],J,void 0,c);g=(f+y[c]+J)%J;b.infiniteSlider?g!=$[c]&&(d=!0):f!=I[c]&&(d=!0);if(d&&(I[c]=f,$[c]=g,ja=!0,g=new e.args("change",b,D,a(D).children(":eq("+g+")"),g,g),a(z).data("args",g),""!=b.onSlideChange))b.onSlideChange(g)}aa=!1});t=a(window);if(X||Z)t=a(document);a(ka).bind("touchend.iosSliderEvent",function(a){a=a.originalEvent;if(ea[c]||Y||ya)return!0;if(0!=a.touches.length)for(var d=0;d<a.touches.length;d++)a.touches[d].pageX==H&&e.slowScrollHorizontal(D, A,f,v,W,ba,s,h,r,p,m,C,l,L,c,Q,J,qa,ja,k,b);else e.slowScrollHorizontal(D,A,f,v,W,ba,s,h,r,p,m,C,l,L,c,Q,J,qa,ja,k,b);aa=ra=!1});a(t).bind("mouseup.iosSliderEvent"+c,function(){U?va.unbind("click.disableClick").bind("click.disableClick",e.preventClick):va.unbind("click.disableClick").bind("click.disableClick",e.enableClick);za.each(function(){this.onclick=function(b){if(U)return!1;a(this).data("onclick").call(this,b||window.event)}});1.8<=parseFloat(a().jquery)?oa.each(function(){var b=a._data(this, "events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!U)return!1;a(this).one("click.disableClick",e.preventClick);var b=a._data(this,"events").click,c=b.pop();b.splice(0,0,c)}}):1.6<=parseFloat(a().jquery)&&oa.each(function(){var b=a(this).data("events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!U)return!1;a(this).one("click.disableClick",e.preventClick);var b=a(this).data("events").click,c=b.pop();b.splice(0,0,c)}});if(!ta[c]){if(Y)return!0; a(ka).css({cursor:fa});xa=!1;if(void 0==pa)return!0;e.slowScrollHorizontal(pa,A,f,v,W,ba,s,h,r,p,m,C,l,L,c,Q,J,qa,ja,k,b);pa=void 0}aa=ra=!1})}})},destroy:function(d,f){void 0==f&&(f=this);return a(f).each(function(){var b=a(this),f=b.data("iosslider");if(void 0==f)return!1;void 0==d&&(d=!0);e.autoSlidePause(f.sliderNumber);ta[f.sliderNumber]=!0;a(window).unbind(".iosSliderEvent-"+f.sliderNumber);a(document).unbind(".iosSliderEvent-"+f.sliderNumber);a(document).unbind("keydown.iosSliderEvent");a(this).unbind(".iosSliderEvent"); a(this).children(":first-child").unbind(".iosSliderEvent");a(this).children(":first-child").children().unbind(".iosSliderEvent");d&&(a(this).attr("style",""),a(this).children(":first-child").attr("style",""),a(this).children(":first-child").children().attr("style",""),a(f.settings.navSlideSelector).attr("style",""),a(f.settings.navPrevSelector).attr("style",""),a(f.settings.navNextSelector).attr("style",""),a(f.settings.autoSlideToggleSelector).attr("style",""),a(f.settings.unselectableSelector).attr("style", ""));f.settings.scrollbar&&a(".scrollbarBlock"+f.sliderNumber).remove();for(var f=da[f.sliderNumber],c=0;c<f.length;c++)clearTimeout(f[c]);b.removeData("iosslider");b.removeData("args")})},update:function(d){void 0==d&&(d=this);return a(d).each(function(){var d=a(this),b=d.data("iosslider");if(void 0==b)return!1;b.settings.startAtSlide=d.data("args").currentSlideNumber;R.destroy(!1,this);1!=b.numberOfSlides&&b.settings.infiniteSlider&&(b.settings.startAtSlide=(I[b.sliderNumber]+1+y[b.sliderNumber]+ b.numberOfSlides)%b.numberOfSlides);R.init(b.settings,this);d=new e.args("update",b.settings,b.scrollerNode,a(b.scrollerNode).children(":eq("+(b.settings.startAtSlide-1)+")"),b.settings.startAtSlide-1,b.settings.startAtSlide-1);a(b.stageNode).data("args",d);if(""!=b.settings.onSliderUpdate)b.settings.onSliderUpdate(d)})},addSlide:function(d,e){return this.each(function(){var b=a(this),j=b.data("iosslider");if(void 0==j)return!1;0==a(j.scrollerNode).children().size()?(a(j.scrollerNode).append(d),b.data("args").currentSlideNumber= 1):j.settings.infiniteSlider?(1==e?a(j.scrollerNode).children(":eq(0)").before(d):a(j.scrollerNode).children(":eq("+(e-2)+")").after(d),-1>y[j.sliderNumber]&&I[j.sliderNumber]--,b.data("args").currentSlideNumber>=e&&I[j.sliderNumber]++):(e<=j.numberOfSlides?a(j.scrollerNode).children(":eq("+(e-1)+")").before(d):a(j.scrollerNode).children(":eq("+(e-2)+")").after(d),b.data("args").currentSlideNumber>=e&&b.data("args").currentSlideNumber++);b.data("iosslider").numberOfSlides++;R.update(this)})},removeSlide:function(d){return this.each(function(){var e= a(this).data("iosslider");if(void 0==e)return!1;a(e.scrollerNode).children(":eq("+(d-1)+")").remove();I[e.sliderNumber]>d-1&&I[e.sliderNumber]--;R.update(this)})},goToSlide:function(d,f){void 0==f&&(f=this);return a(f).each(function(){var b=a(this).data("iosslider");if(void 0==b)return!1;d=d>b.childrenOffsets.length?b.childrenOffsets.length-1:d-1;e.changeSlide(d,a(b.scrollerNode),a(b.slideNodes),da[b.sliderNumber],b.scrollbarClass,b.scrollbarWidth,b.stageWidth,b.scrollbarStageWidth,b.scrollMargin, b.scrollBorder,b.originalOffsets,b.childrenOffsets,b.slideNodeOuterWidths,b.sliderNumber,b.infiniteSliderWidth,b.numberOfSlides,b.centeredSlideOffset,b.settings);I[b.sliderNumber]=d})},lock:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;ea[d.sliderNumber]=!0})},unlock:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;ea[d.sliderNumber]=!1})},getData:function(){return this.each(function(){var d=a(this).data("iosslider"); return void 0==d?!1:d})},autoSlidePause:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;S[d.sliderNumber].autoSlide=!1;e.autoSlidePause(d.sliderNumber);return d})},autoSlidePlay:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;S[d.sliderNumber].autoSlide=!0;e.autoSlide(a(d.scrollerNode),a(d.slideNodes),da[d.sliderNumber],d.scrollbarClass,d.scrollbarWidth,d.stageWidth,d.scrollbarStageWidth,d.scrollMargin,d.scrollBorder, d.originalOffsets,d.childrenOffsets,d.slideNodeOuterWidths,d.sliderNumber,d.infiniteSliderWidth,d.numberOfSlides,d.centeredSlideOffset,d.settings);return d})}};a.fn.iosSlider=function(d){if(R[d])return R[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof d||!d)return R.init.apply(this,arguments);a.error("invalid method call!")}})(jQuery);