/*
 * iosSlider - http://iosscripts.com/iosslider/
 * 
 * A jQuery Horizontal Slider for iPhone/iPad Safari 
 * This plugin turns any wide element into a touch enabled horizontal slider.
 * 
 * Copyright (c) 2012 Marc Whitbread
 * 
 * Version: v1.1.31 (11/07/2012)
 * Minimum requirements: jQuery v1.4+
 *
 * Advanced requirements:
 * 1) jQuery bind() click event override on slide requires jQuery v1.6+
 *
 * Terms of use:
 *
 * 1) iosSlider is licensed under the Creative Commons â€“ Attribution-NonCommercial 3.0 License.
 * 2) You may use iosSlider free for personal or non-profit purposes, without restriction.
 *	  Attribution is not required but always appreciated. For commercial projects, you
 *	  must purchase a license. You may download and play with the script before deciding to
 *	  fully implement it in your project. Making sure you are satisfied, and knowing iosSlider
 *	  is the right script for your project is paramount.
 * 3) You are not permitted to make the resources found on iosscripts.com available for
 *    distribution elsewhere "as is" without prior consent. If you would like to feature
 *    iosSlider on your site, please do not link directly to the resource zip files. Please
 *    link to the appropriate page on iosscripts.com where users can find the download.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 */
 
(function(a){var ia=0,T=0,Z=0,P=0,K="ontouchstart"in window,ya="onorientationchange"in window,$=!1,W=!1,X=!1,da="pointer",na="pointer",ja=[],ea=[],oa=[],pa=[],fa=[],F=[],Y=[],x=[],f=[],p=[],qa=[],aa=[],e={showScrollbar:function(g,d){g.scrollbarHide&&a("."+d).css({opacity:g.scrollbarOpacity,filter:"alpha(opacity:"+100*g.scrollbarOpacity+")"})},hideScrollbar:function(a,d,c,C,b,m,f,p,s,v){if(a.scrollbar&&a.scrollbarHide)for(var x=c;x<c+25;x++)d[d.length]=e.hideScrollbarIntervalTimer(10*x,C[c],(c+24- x)/24,b,m,f,p,s,v,a)},hideScrollbarInterval:function(g,d,c,C,b,m,f,x,s){P=-1*g/p[x]*(b-m-f-C);e.setSliderOffset("."+c,P);a("."+c).css({opacity:s.scrollbarOpacity*d,filter:"alpha(opacity:"+100*s.scrollbarOpacity*d+")"})},slowScrollHorizontalInterval:function(g,d,c,C,b,m,M,H,s,v,G,t,q,r,i,w,l,j){if(j.infiniteSlider){if(c<=-1*p[i]){var n=a(g).width();if(c<=-1*qa[i]){var u=-1*G[0];a(d).each(function(b){e.setSliderOffset(a(d)[b],u+w);b<t.length&&(t[b]=-1*u);u+=a(this).outerWidth(!0)});c+=-1*t[0];f[i]= -1*t[0]+w;p[i]=f[i]+n-m;x[i]=0}else{var k=0,B=e.getSliderOffset(a(d[0]),"x");a(d).each(function(a){e.getSliderOffset(this,"x")<B&&(B=e.getSliderOffset(this,"x"),k=a)});q=f[i]+n;e.setSliderOffset(a(d)[k],q);f[i]=-1*t[1]+w;p[i]=f[i]+n-m;t.splice(0,1);t.splice(t.length,0,-1*q+w);x[i]++}}if(c>=-1*f[i]||0<=c){n=a(g).width();if(0<=c){u=-1*G[0];a(d).each(function(b){e.setSliderOffset(a(d)[b],u+w);b<t.length&&(t[b]=-1*u);u+=a(this).outerWidth(!0)});c-=-1*t[0];f[i]=-1*t[0]+w;p[i]=f[i]+n-m;for(x[i]=r;-1*t[0]- n+w>-1*e.getSliderOffset(g,"x")&&j.snapSlideCenter;){var y=0,I=e.getSliderOffset(a(d[0]),"x");a(d).each(function(a){e.getSliderOffset(this,"x")>I&&(I=e.getSliderOffset(this,"x"),y=a)});q=f[i]-a(d[y]).outerWidth(!0);e.setSliderOffset(a(d)[y],q);t.splice(0,0,-1*q+w);t.splice(t.length-1,1);f[i]=-1*t[0]+w;p[i]=f[i]+n-m;x[i]--;F[i]++}}0>c&&(y=0,I=e.getSliderOffset(a(d[0]),"x"),a(d).each(function(a){e.getSliderOffset(this,"x")>I&&(I=e.getSliderOffset(this,"x"),y=a)}),q=f[i]-a(d[y]).outerWidth(!0),e.setSliderOffset(a(d)[y], q),t.splice(0,0,-1*q+w),t.splice(t.length-1,1),f[i]=-1*t[0]+w,p[i]=f[i]+n-m,x[i]--)}}G=!1;m=e.calcActiveOffset(j,c,t,m,x[i],r,v,i);q=(m+x[i]+r)%r;j.infiniteSlider?q!=Y[i]&&(G=!0):m!=F[i]&&(G=!0);if(G&&(r=new e.args(j,g,a(g).children(":eq("+q+")"),q,l,!0),a(g).parent().data("args",r),""!=j.onSlideChange))j.onSlideChange(r);F[i]=m;Y[i]=q;c=Math.floor(c);e.setSliderOffset(g,c);j.scrollbar&&(P=Math.floor((-1*c-f[i])/(p[i]-f[i])*(M-H-b)),g=b-s,c>=-1*f[i]?(g=b-s- -1*P,e.setSliderOffset(a("."+C),0)):(c<= -1*p[i]+1&&(g=M-H-s-P),e.setSliderOffset(a("."+C),P)),a("."+C).css({width:g+"px"}))},slowScrollHorizontal:function(g,d,c,C,b,m,M,H,s,v,G,t,q,r,i,w,l,j,n,u){var m=[],k=e.getSliderOffset(g,"x"),B=0,y=25/1024*H;frictionCoefficient=u.frictionCoefficient;elasticFrictionCoefficient=u.elasticFrictionCoefficient;snapFrictionCoefficient=u.snapFrictionCoefficient;5<b&&u.snapToChildren&&!j?B=1:-5>b&&(u.snapToChildren&&!j)&&(B=-1);b<-1*y?b=-1*y:b>y&&(b=y);a(g)[0]!==a(l)[0]&&(B*=-1,b*=-2);l=x[r];if(u.infiniteSlider)var I= f[r],D=p[r];for(var j=[],y=[],h=0;h<q.length;h++)j[h]=q[h],h<d.length&&(y[h]=e.getSliderOffset(a(d[h]),"x"));for(;1<b||-1>b;){b*=frictionCoefficient;k+=b;if((k>-1*f[r]||k<-1*p[r])&&!u.infiniteSlider)b*=elasticFrictionCoefficient,k+=b;if(u.infiniteSlider){if(k<=-1*D){for(var D=a(g).width(),J=0,K=y[0],h=0;h<y.length;h++)y[h]<K&&(K=y[h],J=h);h=I+D;y[J]=h;I=-1*j[1]+n;D=I+D-H;j.splice(0,1);j.splice(j.length,0,-1*h+n);l++}if(k>=-1*I){D=a(g).width();J=0;K=y[0];for(h=0;h<y.length;h++)y[h]>K&&(K=y[h],J=h); h=I-a(d[J]).outerWidth(!0);y[J]=h;j.splice(0,0,-1*h+n);j.splice(j.length-1,1);I=-1*j[0]+n;D=I+D-H;l--}}m[m.length]=k}y=!1;b=e.calcActiveOffset(u,k,j,H,l,w,F[r],r);I=(b+l+w)%w;u.snapToChildren&&(u.infiniteSlider?I!=Y[r]&&(y=!0):b!=F[r]&&(y=!0),0>B&&!y?(b++,b>=q.length&&!u.infinteSlider&&(b=q.length-1)):0<B&&!y&&(b--,0>b&&!u.infinteSlider&&(b=0)));if(u.snapToChildren||(k>-1*f[r]||k<-1*p[r])&&!u.infiniteSlider){k=e.getSliderOffset(g,"x");for(m.splice(0,m.length);k<j[b]-0.5||k>j[b]+0.5;)k=(k-j[b])*snapFrictionCoefficient+ j[b],m[m.length]=k;m[m.length]=j[b]}B=1;0!=m.length%2&&(B=0);for(k=0;k<c.length;k++)clearTimeout(c[k]);l=(b+l+w)%w;I=0;for(k=B;k<m.length;k+=2)if(k==B||1<Math.abs(m[k]-I)||k>=m.length-2)I=m[k],c[c.length]=e.slowScrollHorizontalIntervalTimer(10*k,g,d,m[k],C,M,H,s,v,G,b,t,q,i,w,r,n,l,u);I=(b+x[r]+w)%w;""!=u.onSlideComplete&&(c[c.length]=e.onSlideCompleteTimer(10*(k+1),u,g,a(g).children(":eq("+I+")"),I,r));fa[r]=c;e.hideScrollbar(u,c,k,m,C,M,H,v,G,r)},onSlideComplete:function(g,d,c,C,b){var m=ja[b]!= C?!0:!1,d=new e.args(g,a(d),c,C,C,m);a(stageNode).data("args",d);if(""!=g.onSlideComplete)g.onSlideComplete(d);ja[b]=C},getSliderOffset:function(g,d){var c=0,d="x"==d?4:5;if($&&!W&&!X){for(var c=["-webkit-transform","-moz-transform","transform"],e=0;e<c.length;e++)if(void 0!=a(g).css(c[e])&&0<a(g).css(c[e]).length){var b=a(g).css(c[e]).split(",");break}c=parseInt(b[d],10)}else c=parseInt(a(g).css("left"),10);return c},setSliderOffset:function(g,e){$&&!W&&!X?a(g).css({webkitTransform:"matrix(1,0,0,1,"+ e+",0)",MozTransform:"matrix(1,0,0,1,"+e+",0)",transform:"matrix(1,0,0,1,"+e+",0)"}):a(g).css({left:e+"px"})},setBrowserInfo:function(){null!=navigator.userAgent.match("WebKit")?(da="-webkit-grab",na="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(da="move",na="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")?W=!0:null!=navigator.userAgent.match("MSIE 8")?X=!0:navigator.userAgent.match("MSIE 9")},has3DTransform:function(){var e=!1,d=a("<div />").css({webkitTransform:"matrix(1,1,1,1,1,1)", MozTransform:"matrix(1,1,1,1,1,1)",transform:"matrix(1,1,1,1,1,1)"});""==d.attr("style")?e=!1:void 0!=d.attr("style")&&(e=!0);return e},getSlideNumber:function(a,e,c){return(a-x[e]+c)%c},calcActiveOffset:function(a,e,c,C){for(var b=!1,a=[],m,f=0;f<c.length;f++)c[f]<=e&&c[f]>e-C&&(!b&&c[f]!=e&&(a[a.length]=c[f-1]),a[a.length]=c[f],b=!0);0==a.length&&(a[0]=c[c.length-1]);for(f=b=0;f<a.length;f++){var p=Math.abs(e-a[f]);p<C&&(b=a[f],C=p)}for(f=0;f<c.length;f++)b==c[f]&&(m=f);return m},changeSlide:function(g, d,c,f,b,m,p,H,s,v,G,t,q,r,i,w,l){e.autoSlidePause(q);for(var j=0;j<f.length;j++)clearTimeout(f[j]);var n=Math.ceil(l.autoSlideTransTimer/10)+1,u=e.getSliderOffset(d,"x"),k=t[g],B=k-u;if(l.infiniteSlider){g=(g-x[q]+2*i)%i;j=!1;0==g&&2==i&&(g=i,t[g]=t[g-1]-a(c).eq(0).outerWidth(!0),j=!0);k=t[g];B=k-u;k=[t[g]-a(d).width(),t[g]+a(d).width()];j&&t.splice(t.length-1,1);for(j=0;j<k.length;j++)Math.abs(k[j]-u)<Math.abs(B)&&(B=k[j]-u)}var k=[],y;e.showScrollbar(l,b);for(j=0;j<=n;j++)y=j,y/=n,y--,y=u+B*(Math.pow(y, 5)+1),k[k.length]=y;for(j=u=0;j<k.length;j++){if(0==j||1<Math.abs(k[j]-u)||j>=k.length-2)u=k[j],f[j]=e.slowScrollHorizontalIntervalTimer(10*(j+1),d,c,k[j],b,m,p,H,s,v,g,G,t,r,i,q,w,g,l);0==j&&""!=l.onSlideStart&&(n=(F[q]+x[q]+i)%i,l.onSlideStart(new e.args(l,d,a(d).children(":eq("+n+")"),n,g,!1)))}u=!1;n=(g+x[q]+i)%i;l.infiniteSlider?n!=Y[q]&&(u=!0):g!=F[q]&&(u=!0);u&&""!=l.onSlideComplete&&(f[f.length]=e.onSlideCompleteTimer(10*(j+1),l,d,a(d).children(":eq("+n+")"),n,q));fa[q]=f;e.hideScrollbar(l, f,j,k,b,m,p,s,v,q);e.autoSlide(d,c,f,b,m,p,H,s,v,G,t,q,r,i,w,l)},autoSlide:function(a,d,c,f,b,m,p,H,s,v,G,t,q,r,i,w){if(!w.autoSlide)return!1;e.autoSlidePause(t);ea[t]=setTimeout(function(){!w.infiniteSlider&&F[t]>G.length-1&&(F[t]-=r);e.changeSlide((F[t]+x[t]+r+1)%r,a,d,c,f,b,m,p,H,s,v,G,t,q,r,i,w);e.autoSlide(a,d,c,f,b,m,p,H,s,v,G,t,q,r,i,w)},w.autoSlideTimer+w.autoSlideTransTimer)},autoSlidePause:function(a){clearTimeout(ea[a])},isUnselectable:function(e,d){return""!=d.unselectableSelector&&1== a(e).closest(d.unselectableSelector).size()?!0:!1},slowScrollHorizontalIntervalTimer:function(a,d,c,f,b,m,p,x,s,v,F,t,q,r,i,w,l,j,n){return setTimeout(function(){e.slowScrollHorizontalInterval(d,c,f,b,m,p,x,s,v,F,t,q,r,i,w,l,j,n)},a)},onSlideCompleteTimer:function(a,d,c,f,b,m){return setTimeout(function(){e.onSlideComplete(d,c,f,b,m)},a)},hideScrollbarIntervalTimer:function(a,d,c,f,b,m,p,x,s,v){return setTimeout(function(){e.hideScrollbarInterval(d,c,f,b,m,p,x,s,v)},a)},args:function(g,d,c,f,b,m){this.settings= g;this.data=a(d).parent().data("iosslider");this.slideChanged=m;this.sliderObject=d;this.sliderContainerObject=a(d).parent();this.currentSlideObject=c;this.currentSlideNumber=f+1;this.targetSlideObject=a(d).children(":eq("+b+")");this.targetSlideNumber=b+1;this.currentSliderOffset=-1*e.getSliderOffset(d,"x")},preventDrag:function(a){a.preventDefault()},preventClick:function(a){a.stopImmediatePropagation();return!1},enableClick:function(){return!0}};e.setBrowserInfo();var R={init:function(g,d){$=e.has3DTransform(); var c=a.extend(!0,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,snapSlideCenter:!1,startAtSlide:1,scrollbar:!1,scrollbarDrag:!1,scrollbarHide:!0,scrollbarLocation:"top",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000",scrollbarElasticPullResistance:0.9,desktopClickDrag:!1, keyboardControls:!1,responsiveSlideContainer:!0,responsiveSlides:!0,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1,autoSlideTimer:5E3,autoSlideTransTimer:750,infiniteSlider:!1,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"",onSliderLoaded:"",onSliderUpdate:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},g);void 0==d&&(d=this);return a(d).each(function(){function d(){e.autoSlidePause(b);ra= a(z).find("a");va=a(z).find("[onclick]");sa=a(z).find("*");a(j).css("width","");a(j).css("height","");a(z).css("width","");A=a(z).children().not("script");a(A).css("width","");p[b]=0;h=[];i=a(j).parent().width();n=a(j).outerWidth(!0);c.responsiveSlideContainer&&(n=a(j).outerWidth(!0)>i?i:a(j).outerWidth(!0));a(j).css({position:c.stageCSS.position,top:c.stageCSS.top,left:c.stageCSS.left,overflow:c.stageCSS.overflow,zIndex:c.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",width:n}); a(c.unselectableSelector).css({cursor:"default"});c.responsiveSlides&&a(A).each(function(){var b=a(this).outerWidth(!0),b=b>n?n+-1*(a(this).outerWidth(!0)-a(this).width()):a(this).width();a(this).css({width:b})});a(A).each(function(c){a(this).css({webkitBackfaceVisibility:"hidden",position:"absolute",top:0});h[c]=-1*p[b];p[b]+=a(this).outerWidth(!0)});c.snapSlideCenter&&(l=0.5*(n-a(A[0]).outerWidth(!0)));qa[b]=2*p[b];a(A).each(function(c){e.setSliderOffset(a(this),-1*h[c]+p[b]+l);h[c]-=p[b]});if(!c.infiniteSlider&& !c.snapSlideCenter){for(var N=0;N<h.length&&!(h[N]<=-1*(2*p[b]-n));N++)ea=N;h.splice(ea+1,h.length);h[h.length]=-1*(2*p[b]-n)}for(N=0;N<h.length;N++)J[N]=h[N];I&&(c.startAtSlide=c.startAtSlide>h.length?h.length:c.startAtSlide,F[b]=c.startAtSlide-1,Y[b]=F[b],I=!1);f[b]=p[b]+l;a(z).css({position:"relative",cursor:da,webkitPerspective:"0",webkitBackfaceVisibility:"hidden",width:p[b]+"px"});U=p[b];p[b]=2*p[b]-n+2*l;(O=U<n?!0:!1)&&a(z).css({cursor:"default"});w=a(j).parent().outerHeight(!0);u=a(j).height(); c.responsiveSlideContainer&&(u=a(j).height()>w?w:a(j).height());a(j).css({height:u});if(c.infiniteSlider&&!O){e.getSliderOffset(a(z),"x");for(N=-1*((x[b]+E)%E);0>N;){var y=0,C=e.getSliderOffset(a(A[0]),"x");a(A).each(function(a){e.getSliderOffset(this,"x")<C&&(C=e.getSliderOffset(this,"x"),y=a)});var D=f[b]+U;e.setSliderOffset(a(A)[y],D);f[b]=-1*h[1]+l;p[b]=f[b]+U-n;h.splice(0,1);h.splice(h.length,0,-1*D+l);N++}for(;-1*h[0]-U+l>-1*e.getSliderOffset(z,"x")&&c.snapSlideCenter;){var H=0,wa=e.getSliderOffset(a(A[0]), "x");a(A).each(function(a){e.getSliderOffset(this,"x")>wa&&(wa=e.getSliderOffset(this,"x"),H=a)});D=f[b]-a(A[H]).outerWidth(!0);e.setSliderOffset(a(A)[H],D);h.splice(0,0,-1*D+l);h.splice(h.length-1,1);f[b]=-1*h[0]+l;p[b]=f[b]+U-n;x[b]--;F[b]++}}e.setSliderOffset(z,h[F[b]]);!K&&!c.desktopClickDrag&&a(z).css({cursor:"default"});c.scrollbar&&(a("."+s).css({margin:c.scrollbarMargin,overflow:"hidden",display:"none"}),a("."+s+" ."+v).css({border:c.scrollbarBorder}),k=parseInt(a("."+s).css("marginLeft"))+ parseInt(a("."+s).css("marginRight")),B=parseInt(a("."+s+" ."+v).css("borderLeftWidth"),10)+parseInt(a("."+s+" ."+v).css("borderRightWidth"),10),q=""!=c.scrollbarContainer?a(c.scrollbarContainer).width():n,r=(q-k)/E,c.scrollbarHide||(R=c.scrollbarOpacity),a("."+s).css({position:"absolute",left:0,width:q-k+"px",margin:c.scrollbarMargin}),"top"==c.scrollbarLocation?a("."+s).css("top","0"):a("."+s).css("bottom","0"),a("."+s+" ."+v).css({borderRadius:c.scrollbarBorderRadius,background:c.scrollbarBackground, height:c.scrollbarHeight,width:r-B+"px",minWidth:c.scrollbarHeight,border:c.scrollbarBorder,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:R,filter:"alpha(opacity:"+100*R+")",boxShadow:c.scrollbarShadow}),e.setSliderOffset(a("."+s+" ."+v),Math.floor((-1*h[F[b]]-f[b]+l)/(p[b]-f[b])*(q-k-r))),a("."+s).css({display:"block"}),G=a("."+s+" ."+v),t=a("."+s));c.scrollbarDrag&&!O&&a("."+s+" ."+v).css({cursor:da});c.infiniteSlider&&(L=(p[b]+n)/3);""!=c.navSlideSelector&& a(c.navSlideSelector).each(function(d){a(this).css({cursor:"pointer"});a(this).unbind(V).bind(V,function(){e.changeSlide(d,z,A,g,v,r,n,q,k,B,J,h,b,L,E,l,c)})});""!=c.navPrevSelector&&(a(c.navPrevSelector).css({cursor:"pointer"}),a(c.navPrevSelector).unbind(V).bind(V,function(){var a=(F[b]+x[b]+E)%E;(0<a||c.infiniteSlider)&&e.changeSlide(a-1,z,A,g,v,r,n,q,k,B,J,h,b,L,E,l,c)}));""!=c.navNextSelector&&(a(c.navNextSelector).css({cursor:"pointer"}),a(c.navNextSelector).unbind(V).bind(V,function(){var a= (F[b]+x[b]+E)%E;(a<h.length-1||c.infiniteSlider)&&e.changeSlide(a+1,z,A,g,v,r,n,q,k,B,J,h,b,L,E,l,c)}));c.autoSlide&&!O&&(""!=c.autoSlideToggleSelector&&(a(c.autoSlideToggleSelector).css({cursor:"pointer"}),a(c.autoSlideToggleSelector).unbind(V).bind(V,function(){ba?(e.autoSlide(z,A,g,v,r,n,q,k,B,J,h,b,L,E,l,c),ba=!1,a(c.autoSlideToggleSelector).removeClass("on")):(e.autoSlidePause(b),ba=!0,a(c.autoSlideToggleSelector).addClass("on"))})),!ba&&!O&&e.autoSlide(z,A,g,v,r,n,q,k,B,J,h,b,L,E,l,c),K?a(j).bind("touchend.iosSliderEvent", function(){!ba&&!O&&e.autoSlide(z,A,g,v,r,n,q,k,B,J,h,b,L,E,l,c)}):(a(j).bind("mouseenter.iosSliderEvent",function(){e.autoSlidePause(b)}),a(j).bind("mouseleave.iosSliderEvent",function(){!ba&&!O&&e.autoSlide(z,A,g,v,r,n,q,k,B,J,h,b,L,E,l,c)})));a(j).data("iosslider",{obj:xa,settings:c,scrollerNode:z,slideNodes:A,numberOfSlides:E,centeredSlideOffset:l,sliderNumber:b,originalOffsets:J,childrenOffsets:h,sliderMax:p[b],scrollbarClass:v,scrollbarWidth:r,scrollbarStageWidth:q,stageWidth:n,scrollMargin:k, scrollBorder:B,infiniteSliderOffset:x[b],infiniteSliderWidth:L});return!0}ia++;var b=ia,g=[];oa[b]=c;f[b]=0;p[b]=0;var M=[0,0],H=[0,0],s="scrollbarBlock"+ia,v="scrollbar"+ia,G,t,q,r,i,w,l=0,j=a(this),n,u,k,B,y,I=!0,D=-1,h,J=[],R=0,Q=0,$=0,z=a(this).children(":first-child"),A,E=a(z).children().not("script").size(),S=!1,ea=0,ta=!1,ka=void 0,L;x[b]=0;var O=!1;ja[b]=-1;var ba=!1;pa[b]=!1;var la,ma=!1,ga=!1,U,V=K?"touchstart.iosSliderEvent":"click.iosSliderEvent",ra,va,sa;aa[b]=!1;fa[b]=[];c.scrollbarDrag&& (c.scrollbar=!0,c.scrollbarHide=!1);var xa=a(this);if(void 0!=xa.data("iosslider"))return!0;a(this).find("img").bind("dragstart.iosSliderEvent",function(a){a.preventDefault()});c.infiniteSlider&&(c.scrollbar=!1);c.scrollbar&&(""!=c.scrollbarContainer?a(c.scrollbarContainer).append("<div class = '"+s+"'><div class = '"+v+"'></div></div>"):a(z).parent().append("<div class = '"+s+"'><div class = '"+v+"'></div></div>"));if(!d())return!0;a(this).find("a").bind("mousedown",e.preventDrag);a(this).find("[onclick]").bind("click", e.preventDrag).each(function(){a(this).data("onclick",this.onclick)});var D=e.calcActiveOffset(c,e.getSliderOffset(a(z),"x"),h,n,x[b],E,void 0,b),D=(D+x[b]+E)%E,ca=new e.args(c,z,a(z).children(":eq("+D+")"),D,D,!1);a(j).data("args",ca);if(""!=c.onSliderLoaded)c.onSliderLoaded(ca);ja[b]=D;if(oa[b].responsiveSlides||oa[b].responsiveSlideContainer)D=ya?"orientationchange":"resize",a(window).bind(D+".iosSliderEvent",function(){if(!d())return!0});c.keyboardControls&&!O&&a(document).bind("keydown.iosSliderEvent", function(a){!W&&!X&&(a=a.originalEvent);switch(a.keyCode){case 37:a=(F[b]+x[b]+E)%E;(0<a||c.infiniteSlider)&&e.changeSlide(a-1,z,A,g,v,r,n,q,k,B,J,h,b,L,E,l,c);break;case 39:a=(F[b]+x[b]+E)%E,(a<h.length-1||c.infiniteSlider)&&e.changeSlide(a+1,z,A,g,v,r,n,q,k,B,J,h,b,L,E,l,c)}});if(K||c.desktopClickDrag){var ca=K?"touchstart.iosSliderEvent":"mousedown.iosSliderEvent",ha=a(z),D=a(z),ua=!1;c.scrollbarDrag&&(ha=ha.add(G),D=D.add(t));a(ha).bind(ca,function(d){if(aa[b]||O||(ua=e.isUnselectable(d.target, c)))return!0;la=a(this)[0]===a(G)[0]?G:z;!W&&!X&&(d=d.originalEvent);e.autoSlidePause(b);K?(eventX=d.touches[0].pageX,eventY=d.touches[0].pageY):(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),eventX=d.pageX,eventY=d.pageY,ta=!0,ka=z,a(this).css({cursor:na}));M=[0,0];H=[0,0];T=0;S=!1;for(d=0;d<g.length;d++)clearTimeout(g[d]);d=e.getSliderOffset(z, "x");d>-1*f[b]+l+U?(d=-1*f[b]+l+U,e.setSliderOffset(a("."+v),d),a("."+v).css({width:r-B+"px"})):d<-1*p[b]&&(e.setSliderOffset(a("."+v),q-k-r),a("."+v).css({width:r-B+"px"}));d=a(this)[0]===a(G)[0]?f[b]:0;Q=-1*(e.getSliderOffset(this,"x")-eventX-d);e.getSliderOffset(this,"y");M[1]=eventX;H[1]=eventY;ga=!1});ca=K?"touchmove.iosSliderEvent":"mousemove.iosSliderEvent";a(D).bind(ca,function(d){!W&&!X&&(d=d.originalEvent);if(aa[b]||O||ua)return!0;var g=0;K||(window.getSelection?window.getSelection().empty? window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty());if(K)eventX=d.touches[0].pageX,eventY=d.touches[0].pageY;else if(eventX=d.pageX,eventY=d.pageY,!ta)return!1;M[0]=M[1];M[1]=eventX;T=(M[1]-M[0])/2;H[0]=H[1];H[1]=eventY;Z=(H[1]-H[0])/2;if(!S){var i=(F[b]+x[b]+E)%E,i=new e.args(c,z,a(z).children(":eq("+i+")"),i,i,!1);a(j).data("args",i);if(""!=c.onSlideStart)c.onSlideStart(i)}if((3<Z||-3>Z)&&3> T&&-3<T&&K&&!S)ma=!0;(5<T||-5>T)&&K?(d.preventDefault(),S=!0):K||(S=!0);if(S&&!ma){var i=e.getSliderOffset(z,"x"),m=a(this)[0]===a(t)[0]?f[b]:0,u=a(this)[0]===a(t)[0]?(f[b]-p[b])/(q-k-r):1,C=a(this)[0]===a(t)[0]?c.scrollbarElasticPullResistance:c.elasticPullResistance;K&&($!=d.touches.length&&(Q=-1*i+eventX),$=d.touches.length);if(c.infiniteSlider){if(i<=-1*p[b]){var s=a(z).width();if(i<=-1*qa[b]){var w=-1*J[0];a(A).each(function(b){e.setSliderOffset(a(A)[b],w+l);b<h.length&&(h[b]=-1*w);w+=a(this).outerWidth(!0)}); Q-=-1*h[0];f[b]=-1*h[0]+l;p[b]=f[b]+s-n;x[b]=0}else{var D=0,I=e.getSliderOffset(a(A[0]),"x");a(A).each(function(a){e.getSliderOffset(this,"x")<I&&(I=e.getSliderOffset(this,"x"),D=a)});C=f[b]+s;e.setSliderOffset(a(A)[D],C);f[b]=-1*h[1]+l;p[b]=f[b]+s-n;h.splice(0,1);h.splice(h.length,0,-1*C+l);x[b]++}}if(i>=-1*f[b]||0<=i)if(s=a(z).width(),0<=i){w=-1*J[0];a(A).each(function(b){e.setSliderOffset(a(A)[b],w+l);b<h.length&&(h[b]=-1*w);w+=a(this).outerWidth(!0)});Q+=-1*h[0];f[b]=-1*h[0]+l;p[b]=f[b]+s-n;for(x[b]= E;-1*h[0]-s+l>-1*e.getSliderOffset(z,"x")&&c.snapSlideCenter;){var G=0,L=e.getSliderOffset(a(A[0]),"x");a(A).each(function(a){e.getSliderOffset(this,"x")>L&&(L=e.getSliderOffset(this,"x"),G=a)});C=f[b]-a(A[G]).outerWidth(!0);e.setSliderOffset(a(A)[G],C);h.splice(0,0,-1*C+l);h.splice(h.length-1,1);f[b]=-1*h[0]+l;p[b]=f[b]+s-n;x[b]--;F[b]++}}else G=0,L=e.getSliderOffset(a(A[0]),"x"),a(A).each(function(a){e.getSliderOffset(this,"x")>L&&(L=e.getSliderOffset(this,"x"),G=a)}),C=f[b]-a(A[G]).outerWidth(!0), e.setSliderOffset(a(A)[G],C),h.splice(0,0,-1*C+l),h.splice(h.length-1,1),f[b]=-1*h[0]+l,p[b]=f[b]+s-n,x[b]--}else s=a(z).width(),i>-1*f[b]+l&&(g=-1*(f[b]+-1*(Q-m-eventX+l)*u-m)*C/u),i<-1*p[b]&&(g=-1*(p[b]+-1*(Q-m-eventX)*u-m)*C/u);e.setSliderOffset(z,-1*(Q-m-eventX-g)*u-m);c.scrollbar&&(e.showScrollbar(c,v),P=Math.floor((Q-eventX-g-f[b]+l)/(p[b]-f[b])*(q-k-r)*u),m=r,i>=-1*f[b]+l+s?(m=r-B- -1*P,e.setSliderOffset(a("."+v),0),a("."+v).css({width:m+"px"})):i<=-1*p[b]+1?(m=q-k-B-P,e.setSliderOffset(a("."+ v),P),a("."+v).css({width:m+"px"})):e.setSliderOffset(a("."+v),P));K&&(y=d.touches[0].pageX);d=!1;g=e.calcActiveOffset(c,-1*(Q-eventX-g),h,n,x[b],E,void 0,b);s=(g+x[b]+E)%E;c.infiniteSlider?s!=Y[b]&&(d=!0):g!=F[b]&&(d=!0);if(d&&(F[b]=g,Y[b]=s,ga=!0,i=new e.args(c,z,a(z).children(":eq("+s+")"),s,s,!0),a(j).data("args",i),""!=c.onSlideChange))c.onSlideChange(i)}});a(ha).bind("touchend.iosSliderEvent",function(a){a=a.originalEvent;if(aa[b]||O||ua)return!0;if(0!=a.touches.length)for(var d=0;d<a.touches.length;d++)a.touches[d].pageX== y&&e.slowScrollHorizontal(z,A,g,v,T,Z,r,n,q,k,B,J,h,b,L,E,la,ga,l,c);else e.slowScrollHorizontal(z,A,g,v,T,Z,r,n,q,k,B,J,h,b,L,E,la,ga,l,c);ma=!1});if(!K){D=a(window);if(X||W)D=a(document);a(D).bind("mouseup.iosSliderEvent"+b,function(){S?ra.unbind("click.disableClick").bind("click.disableClick",e.preventClick):ra.unbind("click.disableClick").bind("click.disableClick",e.enableClick);va.each(function(){this.onclick=function(b){if(S)return!1;a(this).data("onclick").call(this,b||window.event)}});1.8<= parseFloat(a().jquery)?sa.each(function(){var b=a._data(this,"events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!S)return!1;a(this).one("click.disableClick",e.preventClick);var b=a._data(this,"events").click,c=b.pop();b.splice(0,0,c)}}):1.6<=parseFloat(a().jquery)&&sa.each(function(){var b=a(this).data("events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!S)return!1;a(this).one("click.disableClick",e.preventClick);var b=a(this).data("events").click, c=b.pop();b.splice(0,0,c)}});if(!pa[b]){if(O)return!0;a(ha).css({cursor:da});ta=!1;if(void 0==ka)return!1;e.slowScrollHorizontal(ka,A,g,v,T,Z,r,n,q,k,B,J,h,b,L,E,la,ga,l,c);ka=void 0}ma=!1})}}})},destroy:function(g,d){void 0==d&&(d=this);return a(d).each(function(){var c=a(this),d=c.data("iosslider");if(void 0==d)return!1;void 0==g&&(g=!0);e.autoSlidePause(d.sliderNumber);pa[d.sliderNumber]=!0;a(window).unbind(".iosSliderEvent-"+d.sliderNumber);a(document).unbind(".iosSliderEvent-"+d.sliderNumber); a(this).unbind(".iosSliderEvent");a(this).children(":first-child").unbind(".iosSliderEvent");a(this).children(":first-child").children().unbind(".iosSliderEvent");g&&(a(this).attr("style",""),a(this).children(":first-child").attr("style",""),a(this).children(":first-child").children().attr("style",""),a(d.settings.navSlideSelector).attr("style",""),a(d.settings.navPrevSelector).attr("style",""),a(d.settings.navNextSelector).attr("style",""),a(d.settings.autoSlideToggleSelector).attr("style",""),a(d.settings.unselectableSelector).attr("style", ""));d.settings.scrollbar&&a(".scrollbarBlock"+d.sliderNumber).remove();for(var d=fa[d.sliderNumber],b=0;b<d.length;b++)clearTimeout(d[b]);c.removeData("iosslider")})},update:function(g){void 0==g&&(g=this);return a(g).each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;R.destroy(!1,this);d.settings.startAtSlide=1==d.numberOfSlides?d.settings.startAtSlide:(F[d.sliderNumber]+1+x[d.sliderNumber]+d.numberOfSlides)%d.numberOfSlides;R.init(d.settings,this);var c=new e.args(d.settings, d.scrollerNode,a(d.scrollerNode).children(":eq("+(d.settings.startAtSlide-1)+")"),d.settings.startAtSlide-1,d.settings.startAtSlide-1,!1);a(stageNode).data("args",c);if(""!=d.settings.onSliderUpdate)d.settings.onSliderUpdate(c)})},addSlide:function(e,d){return this.each(function(){var c=a(this).data("iosslider");if(void 0==c)return!1;d<=c.numberOfSlides?a(c.scrollerNode).children(":eq("+(d-1)+")").before(e):a(c.scrollerNode).children(":eq("+(d-2)+")").after(e);F[c.sliderNumber]>d-2&&F[c.sliderNumber]++; R.update(this)})},removeSlide:function(e){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;a(d.scrollerNode).children(":eq("+(e-1)+")").remove();F[d.sliderNumber]>e-1&&F[d.sliderNumber]--;R.update(this)})},goToSlide:function(g,d){void 0==d&&(d=this);return a(d).each(function(){var c=a(this).data("iosslider");if(void 0==c)return!1;g=(g-1+c.numberOfSlides)%c.numberOfSlides;e.changeSlide(g,a(c.scrollerNode),a(c.slideNodes),fa[c.sliderNumber],c.scrollbarClass,c.scrollbarWidth, c.stageWidth,c.scrollbarStageWidth,c.scrollMargin,c.scrollBorder,c.originalOffsets,c.childrenOffsets,c.sliderNumber,c.infiniteSliderWidth,c.numberOfSlides,c.centeredSlideOffset,c.settings);F[c.sliderNumber]=g})},lock:function(){return this.each(function(){var e=a(this).data("iosslider");if(void 0==e)return!1;aa[e.sliderNumber]=!0})},unlock:function(){return this.each(function(){var e=a(this).data("iosslider");if(void 0==e)return!1;aa[e.sliderNumber]=!1})},getData:function(){return this.each(function(){var e= a(this).data("iosslider");return void 0==e?!1:e})}};a.fn.iosSlider=function(e){if(R[e])return R[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof e||!e)return R.init.apply(this,arguments);a.error("invalid method call!")}})(jQuery);